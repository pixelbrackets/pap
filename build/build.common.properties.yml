settings:
  web-directory: web/
  #prepare-sync-paths:
  #  - source: src/html/build/assets/
  #    target: www/web/assets/
  sync-paths:
    - source: content/
      target: web/content/
      #target: ${settings.web-directory}content/
      #exclude: ['content-subfolder-1/', 'content-subfolder-2/']
    - source: themes/theclassy/
      target: web/themes/theclassy/
  #watch:
  #  working-directory: src/
  assets:
    mirror:
      source: src/html/assets/
      target: src/html/build/assets/
    minify-css:
      - source: src/html/build/assets/css/stylesheet.css
        target: src/html/build/assets/css/stylesheet.css
    minify-js:
      - source: src/html/build/assets/js/bootstrap.js
        target: src/html/build/assets/js/bootstrap.js
    minify-img:
      - source: src/html/build/assets/img/*
        target: src/html/build/assets/img/
  ### or use Grunt task runner instead
  #grunt:
  #  working-directory: src/html/
  #  task: live
  #composer:
  #  working-directory: www/
  #lint:
  #  php-cs-rules: '@PSR2'
  #  lint-paths:
  #    - src/typo3/

stages:
  test:
    user: johndoe
    host: test.example.com
    working-directory: /var/dev/
    rsync:
      options: -razce 'ssh -p 22'
  live:
    user: johndoe
    host: example.com
    working-directory: /var/www/
    rsync:
      options: -razce 'ssh -p 22'
    composer:
      phar: ${stages.live.working-directory}composer.phar
